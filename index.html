<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Haproxyconsole by youngsterxyf</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Haproxyconsole</h1>
        <h2>主从HAProxy负载均衡任务管理系统</h2>
        <a href="https://github.com/youngsterxyf/haproxyconsole" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p>HAProxyConsole是一个简单的HAProxy负载均衡任务管理系统。由于HAProxy的负载均衡任务可能会很多，手动编辑配置文件非常不方便、不安全，所以实现一个友好的管理系统是非常必要的。</p>

<h3>
<a name="%E5%8A%9F%E8%83%BD%E7%82%B9" class="anchor" href="#%E5%8A%9F%E8%83%BD%E7%82%B9"><span class="octicon octicon-link"></span></a>功能点：</h3>

<ol>
<li>TCP协议负载均衡任务的增删改、任务的列表展示；</li>
<li>一键应用最新配置到主服务器或从服务器并重新HAProxy进程；</li>
<li>修改一个配置项即可在JSON文件存储和数据库存储之间切换；</li>
<li>内置小工具用于不同存储方式之间的数据转换；</li>
<li>内嵌主从HAProxy自带数据统计页面，方便查看信息；</li>
<li>分/不分业务端口自动分配、指定分配端口模式；</li>
<li>内置配置文件正确性检查功能；等...</li>
</ol><p><em>基于Go语言标准库http实现自带Web server，一般情况不需再使用nginx/apache。</em></p>

<h3>
<a name="%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%9B%BE" class="anchor" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E5%9B%BE"><span class="octicon octicon-link"></span></a>使用场景（系统结构图）</h3>

<p><img src="https://raw.github.com/youngsterxyf/youngsterxyf.github.com/master/assets/uploads/pics/high-availability-load-balancer.png" alt="High Availability Load Balancer"></p>

<h3>
<a name="%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E9%A1%B5%E9%9D%A2%E6%88%AA%E5%9B%BE" class="anchor" href="#%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD%E9%A1%B5%E9%9D%A2%E6%88%AA%E5%9B%BE"><span class="octicon octicon-link"></span></a>基本功能页面截图</h3>

<p><img src="https://raw.github.com/youngsterxyf/haproxyconsole/master/screenshot1.png" alt="screenshot-1"></p>

<p><img src="https://raw.github.com/youngsterxyf/haproxyconsole/master/screenshot2.png" alt="screenshot-2"></p>

<h3>
<a name="%E9%85%8D%E7%BD%AE" class="anchor" href="#%E9%85%8D%E7%BD%AE"><span class="octicon octicon-link"></span></a>配置：</h3>

<p>conf目录下有4个文件：</p>

<ul>
<li>app.sql：如果选择以MySQL来存储，则执行该文件中的sql语句创建数据表</li>
<li>app_conf.ini：该文件为haproxyconsole的主配置文件，使用之前阅读每个配置项的说明信息，按照说明修改配置。</li>
<li>DB.json：该文件是在选择以JSON文件存储时，自动生成的存储文件。</li>
<li>haproxy_conf_common.json：该json文件包含4项数据-“Global”、“Defaults”、“ListenStats”、“ListenCommon”，“Global”和“Default”对应HAProxy配置的Global和Defaults部分，“ListenStats”是启用HAProxy自带的数据统计页面，用户可能需要修改该功能启用的端口，“ListenCommon”是所有HAProxyConsole管理的TCP负载均衡任务在生成HAProxy配置listen块时的通用部分。</li>
</ul><h3>
<a name="%E7%BC%96%E8%AF%91" class="anchor" href="#%E7%BC%96%E8%AF%91"><span class="octicon octicon-link"></span></a>编译：</h3>

<pre><code>    cd src &amp;&amp; go build main.go
</code></pre>

<h3>
<a name="%E4%BD%BF%E7%94%A8" class="anchor" href="#%E4%BD%BF%E7%94%A8"><span class="octicon octicon-link"></span></a>使用：</h3>

<p>启动HAProxyConsole（假设HAProxy部署在<code>/usr/local</code>目录下）：<code>cd /usr/local/haproxyconsole/bin &amp;&amp; ./haproxyconsole &amp;</code>，默认端口为9090，可使用选项<code>-p</code>来自定义端口，如：<code>cd /usr/local/haproxyconsole/bin &amp;&amp; ./haproxyconsole -p 8080</code>（注意该端口不应在HAProxyConsole为HAProxy负载均衡任务自动分配的端口范围之内(10000-20000)）。</p>

<p>若需转换数据存储方式，则可通过内置工具来完成：<code>cd /usr/local/haproxyconsole/bin &amp;&amp; ./haproxyconsole -t</code>，该工具完成的操作是：若StoreScheme设定为0，则从DBDriverName和DBDataSourceName 指定数据库的haproxymapinfo数据表中读取数据，转换成json格式存入FileToReplaceDB指定路径的JSON文件中。</p>

<h3>
<a name="%E7%BC%BA%E7%82%B9" class="anchor" href="#%E7%BC%BA%E7%82%B9"><span class="octicon octicon-link"></span></a>缺点：</h3>

<ol>
<li>没有手动编辑HAProxy配置文件灵活，没法对某些负载均衡任务做详细的定制。</li>
<li>目前只实现了3层（TCP协议）负载均衡任务管理。</li>
</ol>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/youngsterxyf/haproxyconsole/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/youngsterxyf/haproxyconsole/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/youngsterxyf/haproxyconsole"></a> is maintained by <a href="https://github.com/youngsterxyf">youngsterxyf</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>